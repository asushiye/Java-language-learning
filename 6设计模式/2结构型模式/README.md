# 1结构型模式

    结构型模式


## 结构型模式

结构型模式(Structural Pattern)描述如何将类或者对 象结合在一起形成更大的结构，

就像搭积木，可以通过 简单积木的组合形成复杂的、功能更为强大的结构。

结构型模式可以分为类结构型模式和对象结构型模式：

```
类结构型模式关心类的组合，由多个类可以组合成一个更大的系统，在类结构型模式中一般只存在继承关系和实现关系。

对象结构型模式关心类与对象的组合，通过关联关系使得在一个类中定义另一个类的实例对象，然后通过该对象调用其方法。 根据“合成复用原则”，在系统中尽量使用关联关系来替代继 承关系，因此大部分结构型模式都是对象结构型模式。
```

包含模式
1. 适配器模式(Adapter) 重要程度：4
2. 桥接模式(Bridge) 重要程度：3
3. 组合模式(Composite) 重要程度：4
4. 装饰模式(Decorator) 重要程度：3
5. 外观模式(Facade) 重要程度：5
6. 享元模式(Flyweight) 重要程度：1
7. 代理模式(Proxy) 重要程度：4

在实际中结合不同场景来使用不同创建型模式。

### 适配器模式(Adapter)

为了有效的调用现有的代码库，但是由于与当前的代码不兼容或现有代码库过于复杂，

为了避免重构代码，新增适配器来满足当前代码的调用。

#### 定义

将一个类的接口转换成客户希望的另外一个接口，使得原本由于接口不兼容而不能一起工作的那些类能一起工作。

适配器(Adapter)，其别名为包装器(Wrapper)。

适配器模式分为类结构型模式和对象结构型模式两种，

类结构型模式：适配器通过继承已有类来实现想要的目标接口，

这种方式类耦合度高，要求程序员了解组件库中类之间关系的内部结构，一般在设计之初使用

对象结构型模式：适配器通过依赖已有对象来实现想要的目标接口，

这种方式一般在现有系统或组件上扩展功能时来使用

#### 包含的角色

* Target：目标接口，客户端调用的方法
* Adaptee：适配者类，原有业务类
* Adapter：适配器类，通过继承或依赖来调用适配者类，并实现Target接口方法

#### 优缺点
优点：在不改变现有系统情况下，可以新增功能，具有很好的扩展性。

缺点：过多的使用适配器会增加系统复杂性，系统过于复杂，那么可以选择重构来避免使用适配器。

#### 适用场景

为了满足系统搞扩展性，在系统设计之初，或在正常运行的系统的上新增功能接口，

这时应该考虑使用适配器模式。


### 桥接模式(Bridge)
当一个物体有多个维度时，包有：手提包，钱包等； 颜色有：蓝色，红色等，

如果要用类表示这种组合，将会存在M*n种组合，若我们使用桥接模式，只会存在M+N种组合。
#### 定义

抽象类依赖实现类。通过具体的抽象类的方法来引用实现类的接口方法，来进行桥接

#### 包含的角色
1. 抽象类（Abstraction）：依赖一个实现类的接口，提供抽象方法。
2. 扩展抽象类（Refined Abstraction）：实现抽象类的抽象方法，并调用实现类的接口。
3. 实现类接口（Implementor）：定义实现类的接口，供扩展抽象化角色调用。
4. 具体实现类（Concrete Implementor：给出实现类接口的具体实现。
#### 优缺点
优点：将抽象和实现的分离。 具有优秀的扩展能力。 客户方便使用

缺点：桥接模式的引入会增加系统的理解与设计难度，由于聚合关联关系建立在抽象层
#### 适用场景
```
1、如果一个系统需要在构件的抽象化角色和具体化角色之间增加更多的灵活性，避免在两个层次之间建立静态的继承联系，通过桥接模式可以使它们在抽象层建立一个关联关系。
2、对于那些不希望使用继承或因为多层次继承导致系统类的个数急剧增加的系统，桥接模式尤为适用。
3、一个类存在两个独立变化的维度，且这两个维度都需要进行扩展。
```

### 桥接模式(Bridge)

#### 包含的角色
#### 定义
#### 优缺点
#### 适用场景
